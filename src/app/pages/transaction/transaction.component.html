<mat-card>
  <mat-card-header>
    <mat-card-title>Transaction</mat-card-title>
    <mat-card-subtitle>Liste de l'ensemble des transactions</mat-card-subtitle>
  </mat-card-header>
  <mat-card-actions>
    <button mat-button>
      <mat-icon>add</mat-icon>
      <span>Ajouter</span>
    </button>
  </mat-card-actions>

  <mat-card-content>
    <div class="mat-elevation-z5">
      <table [dataSource]="dataSource" mat-table>

        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> ID </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.id}} </td>
        </ng-container>

        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef> Date </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.date | date: 'dd/MM/yy, Ã  HH:mm' }} </td>
        </ng-container>

        <ng-container matColumnDef="montant_envoi">
          <th mat-header-cell *matHeaderCellDef> Montant Envoi </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.montant_envoi}} </td>
        </ng-container>

        <ng-container matColumnDef="frais">
          <th mat-header-cell *matHeaderCellDef> Frais </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.frais}} </td>
        </ng-container>

        <ng-container matColumnDef="montant_total">
          <th mat-header-cell *matHeaderCellDef> Montant total </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.montant_total | number }} </td>
        </ng-container>

        <ng-container matColumnDef="montant_en_cfa">
          <th mat-header-cell *matHeaderCellDef> Montant en CFA </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.montant_total * transaction.devise.taux_conversion | number }} </td>
        </ng-container>

        <ng-container matColumnDef="devise">
          <th mat-header-cell *matHeaderCellDef> Devise </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.devise.nom}} </td>
        </ng-container>

        <ng-container matColumnDef="statut">
          <th mat-header-cell *matHeaderCellDef> Statut </th>
          <td mat-cell *matCellDef="let transaction">
            <button mat-raised-button [color]="changeColorStatut(transaction.statut)">
              {{ transaction.statut | titlecase }}
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="paiement">
          <th mat-header-cell *matHeaderCellDef> Paiement </th>
          <td mat-cell *matCellDef="let transaction" >
            <ng-container *ngIf="transaction.paiement"> {{transaction.paiement.date}}</ng-container>
          </td>
        </ng-container>

        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef> User </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.user.login}} </td>
        </ng-container>

        <ng-container matColumnDef="emetteur">
          <th mat-header-cell *matHeaderCellDef> Emetteur </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.recepteur.prenom +' '+ transaction.emetteur.nom}} </td>
        </ng-container>

        <ng-container matColumnDef="recepteur">
          <th mat-header-cell *matHeaderCellDef> Recepteur </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.recepteur.prenom +' '+ transaction.recepteur.nom}} </td>
        </ng-container>

        <ng-container matColumnDef="pays_origine">
          <th mat-header-cell *matHeaderCellDef> Pays Origine </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.pays_origine.nom}} </td>
        </ng-container>

        <ng-container matColumnDef="pays_destination">
          <th mat-header-cell *matHeaderCellDef> Pays Destination </th>
          <td mat-cell *matCellDef="let transaction"> {{transaction.pays_destination.nom}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="colonnes"></tr>
        <tr mat-row *matRowDef="let transaction; columns: colonnes;"
            [routerLink]="['./', transaction.id]">
        </tr>

      </table>


      <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                     aria-label="Select page of periodic elements"
                     showFirstLastButtons>
      </mat-paginator>

    </div>

  </mat-card-content>
</mat-card>
